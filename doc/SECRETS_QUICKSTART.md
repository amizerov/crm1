# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–µ–∫—Ä–µ—Ç–æ–≤

## –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ –ë–î

–í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —Ç–∞–±–ª–∏—Ü:

```sql
-- –ù–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ: sql/create_project_secrets.sql
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç:
- –¢–∞–±–ª–∏—Ü—É `ProjectSecrets` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤
- –¢–∞–±–ª–∏—Ü—É `SecretAccessLog` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞
- –ü–æ–ª–µ `master_password_hash` –≤ —Ç–∞–±–ª–∏—Ü–µ `Projects`

## –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã:

1. ‚úÖ `src/app/tasks/views/project/components/Secrets.tsx` - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
2. ‚úÖ `src/app/tasks/views/project/actions/getSecrets.ts` - Server actions
3. ‚úÖ `sql/create_project_secrets.sql` - SQL –º–∏–≥—Ä–∞—Ü–∏—è

## –®–∞–≥ 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π –ø—Ä–æ–µ–∫—Ç –≤ —Å–∏—Å—Ç–µ–º–µ
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Ç–∞–± "–°–µ–∫—Ä–µ—Ç—ã"
3. –í–≤–µ–¥–∏—Ç–µ –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å (–ª—é–±–æ–π –ø–∞—Ä–æ–ª—å –¥–ª–∏–Ω–æ–π ‚â• 4 —Å–∏–º–≤–æ–ª–∞)
4. –ù–∞–∂–º–∏—Ç–µ "–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å"
5. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π —Å–µ–∫—Ä–µ—Ç –ø—Ä–æ–µ–∫—Ç–∞

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- üîê –ó–∞—â–∏—Ç–∞ –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª–µ–º
- ‚è±Ô∏è –ê–≤—Ç–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —á–µ—Ä–µ–∑ 5 –º–∏–Ω—É—Ç –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è
- üëÅÔ∏è –ü–æ–∫–∞–∑/—Å–∫—Ä—ã—Ç–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Å–µ–∫—Ä–µ—Ç–æ–≤
- üìã –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤
- üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π
- üé® –ö—Ä–∞—Å–∏–≤—ã–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI
- üåô –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã

### üöß TODO (–¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏)

1. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤ –ë–î**
   ```typescript
   // –í getSecrets.ts - –¥–æ–±–∞–≤–∏—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
   const crypto = require('crypto');
   const encryptedValue = encryptValue(value, masterKey);
   ```

2. **Bcrypt –¥–ª—è –ø–∞—Ä–æ–ª–µ–π**
   ```bash
   npm install bcrypt @types/bcrypt
   ```
   ```typescript
   // –í getSecrets.ts - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å bcrypt
   const bcrypt = require('bcrypt');
   const hash = await bcrypt.hash(password, 10);
   const isValid = await bcrypt.compare(password, hash);
   ```

3. **UI –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—è**
   - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–µ–∫—Ç–∞
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞/–∏–∑–º–µ–Ω–µ–Ω–∏–µ –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—è
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞—Ä–æ–ª—è

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    ‚Üì (–≤–≤–æ–¥–∏—Ç –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—å)
Frontend (Secrets.tsx)
    ‚Üì (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É)
Server Action (verifyMasterPassword)
    ‚Üì (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ö–µ—à –≤ –ë–î)
Database (Projects.master_password_hash)
    ‚Üì (–µ—Å–ª–∏ –≤–∞–ª–∏–¥–µ–Ω)
Server Action (getProjectSecrets)
    ‚Üì (—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è)
Frontend (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç—ã)
    ‚Üì (–ª–æ–≥–∏—Ä—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è)
Database (SecretAccessLog)
```

## –î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏

–°–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏–∑ `.github/instructions/improve.instructions.md`, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–î–æ–±–∞–≤–∏—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π —Å–µ–∫—Ä–µ—Ç–æ–≤** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AES-256 –∏–ª–∏ –ø–æ–¥–æ–±–Ω–æ–µ
   - –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

2. **–£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –º–∞—Å—Ç–µ—Ä-–ø–∞—Ä–æ–ª—è** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
   - –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ bcrypt
   - –ú–∏–Ω–∏–º—É–º 10 —Ä–∞—É–Ω–¥–æ–≤ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

3. **–î–æ–±–∞–≤–∏—Ç—å rate limiting** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)
   - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –≤–≤–æ–¥–∞ –ø–∞—Ä–æ–ª—è
   - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ N –º–∏–Ω—É—Ç –ø–æ—Å–ª–µ X –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫

4. **–ê—É–¥–∏—Ç –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3)
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∫—Ä–∏—Ç–∏—á–Ω—ã–º —Å–µ–∫—Ä–µ—Ç–∞–º
   - Dashboard —Å –ª–æ–≥–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
   - –≠–∫—Å–ø–æ—Ä—Ç –ª–æ–≥–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

–°–∏—Å—Ç–µ–º–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ.
